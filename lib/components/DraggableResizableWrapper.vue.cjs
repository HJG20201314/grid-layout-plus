"use strict";const l=require("vue"),S=require("@vexip-ui/utils"),D=require("../utils/interact-helper.cjs"),b=require("../utils/css-units.cjs"),F=l.defineComponent({__name:"DraggableResizableWrapper",props:{draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},useCssTransforms:{type:Boolean,default:!0},dragOptions:{default:()=>({})},resizeOptions:{default:()=>({})},initialX:{default:0},initialY:{default:0},initialWidth:{default:200},initialHeight:{default:150},watchDeep:{type:Boolean,default:!1},watchImmediate:{type:Boolean,default:!1}},emits:["dragStart","dragMove","dragEnd","resizeStart","resizeMove","resizeEnd"],setup(A,{expose:O,emit:E}){const i=A,g=E,a=l.ref(),n=l.ref(typeof i.initialX=="number"?i.initialX:0),r=l.ref(typeof i.initialY=="number"?i.initialY:0),s=l.ref(typeof i.initialWidth=="number"?i.initialWidth:200),u=l.ref(typeof i.initialHeight=="number"?i.initialHeight:150);let d=!1,m=!1,z={},o=null,v=null,h=null,y=null;const f=[],x=l.computed(()=>({x:n.value,y:r.value,width:s.value,height:u.value,isDragging:d,isResizing:m,activeEdges:z})),B=()=>({onDrag:e=>{e.type==="dragmove"?requestAnimationFrame(()=>{n.value=e.left,r.value=e.top,g("dragMove",e)}):(e.type==="dragstart"?(d=!0,g("dragStart",e)):e.type==="dragend"&&(d=!1,g("dragEnd",e)),n.value=e.left,r.value=e.top)},onResize:e=>{e.type==="resizemove"?requestAnimationFrame(()=>{s.value=e.width,u.value=e.height,n.value=e.left,r.value=e.top,g("resizeMove",e)}):(e.type==="resizestart"?(m=!0,g("resizeStart",e)):e.type==="resizeend"&&(m=!1,g("resizeEnd",e)),s.value=e.width,u.value=e.height,n.value=e.left,r.value=e.top,z=e.edges||{})}}),C=l.computed(()=>({draggable:i.draggable,resizable:i.resizable,useCssTransforms:i.useCssTransforms,dragOptions:i.dragOptions,resizeOptions:i.resizeOptions,x:i.initialX,y:i.initialY,width:i.initialWidth,height:i.initialHeight})),P=()=>{if(!a.value)return;a.value.setAttribute("data-x",i.initialX.toString()),a.value.setAttribute("data-y",i.initialY.toString()),a.value.setAttribute("data-width",i.initialWidth.toString()),a.value.setAttribute("data-height",i.initialHeight.toString());const e=B(),t=D.makeElementDraggableResizable(a.value,C.value,e);o=t.cleanup,v=t.updatePositionAndSize,h=t.updatePosition,y=t.updateSize};f.push(l.watch([()=>i.draggable,()=>i.resizable,()=>i.dragOptions,()=>i.resizeOptions],()=>{o&&(o(),o=null),P()},{deep:i.watchDeep,immediate:i.watchImmediate})),f.push(l.watch([()=>i.initialX,()=>i.initialY,()=>i.initialWidth,()=>i.initialHeight],([e,t,p,c])=>{v&&(v(e,t,p,c),typeof e=="number"&&(n.value=e),typeof t=="number"&&(r.value=t),typeof p=="number"&&(s.value=p),typeof c=="number"&&(u.value=c))})),l.onMounted(()=>{P(),typeof i.initialX=="string"&&(n.value=b.parsePositionValue(i.initialX,a.value,"x")),typeof i.initialY=="string"&&(r.value=b.parsePositionValue(i.initialY,a.value,"y")),typeof i.initialWidth=="string"&&(s.value=b.parseCssSize(i.initialWidth,a.value,"width")),typeof i.initialHeight=="string"&&(u.value=b.parseCssSize(i.initialHeight,a.value,"height"))});const R=S.throttle((e,t,p,c)=>{v&&(v(e,t,p,c),typeof e=="number"&&(n.value=e),typeof t=="number"&&(r.value=t),typeof p=="number"&&(s.value=p),typeof c=="number"&&(u.value=c))},16),k=S.throttle((e,t)=>{h&&(h(e,t),typeof e=="number"&&(n.value=e),typeof t=="number"&&(r.value=t))},16),q=S.throttle((e,t)=>{y&&(y(e,t),typeof e=="number"&&(s.value=e),typeof t=="number"&&(u.value=t))},16);return l.onUnmounted(()=>{o&&(o(),o=null),f!=null&&f.length&&(f.forEach(e=>e()),f.length=0),v=null,h=null,y=null}),O({elementRef:a,x:n,y:r,width:s,height:u,isDragging:d,isResizing:m,activeEdges:z,updatePositionAndSize:R,updatePosition:k,updateSize:q}),(e,t)=>(l.openBlock(),l.createElementBlock("div",{ref_key:"elementRef",ref:a,class:"draggable-resizable-wrapper"},[l.renderSlot(e.$slots,"default",l.normalizeProps(l.guardReactiveProps(x.value)))],512))}});module.exports=F;
//# sourceMappingURL=DraggableResizableWrapper.vue.cjs.map
