"use strict";const a=require("vue"),D=require("../utils/interact-helper.cjs"),h=require("../utils/css-units.cjs"),_=a.defineComponent({__name:"DraggableResizableWrapper",props:{draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},useCssTransforms:{type:Boolean,default:!0},dragOptions:{default:()=>({})},resizeOptions:{default:()=>({})},initialX:{default:0},initialY:{default:0},initialWidth:{default:200},initialHeight:{default:150},watchDeep:{type:Boolean,default:!1},watchImmediate:{type:Boolean,default:!1}},emits:["dragStart","dragMove","dragEnd","resizeStart","resizeMove","resizeEnd"],setup(k,{expose:P,emit:E}){const i=k,d=E,l=a.ref(),r=a.ref(typeof i.initialX=="number"?i.initialX:0),s=a.ref(typeof i.initialY=="number"?i.initialY:0),n=a.ref(typeof i.initialWidth=="number"?i.initialWidth:200),u=a.ref(typeof i.initialHeight=="number"?i.initialHeight:150),v=a.ref(!1),m=a.ref(!1),z=a.ref({});let o=null,g=null,b=null,y=null;const f=[],O=a.computed(()=>({x:r.value,y:s.value,width:n.value,height:u.value,isDragging:v.value,isResizing:m.value,activeEdges:z.value})),R=()=>({onDrag:e=>{switch(r.value=e.left,s.value=e.top,v.value=e.type==="dragstart"?!0:e.type==="dragend"?!1:v.value,e.type){case"dragstart":d("dragStart",e);break;case"dragmove":d("dragMove",e);break;case"dragend":d("dragEnd",e);break}},onResize:e=>{switch(n.value=e.width,u.value=e.height,r.value=e.left,s.value=e.top,m.value=e.type==="resizestart"?!0:e.type==="resizeend"?!1:m.value,z.value=e.edges||{},e.type){case"resizestart":d("resizeStart",e);break;case"resizemove":d("resizeMove",e);break;case"resizeend":d("resizeEnd",e);break}}}),x=a.computed(()=>({draggable:i.draggable,resizable:i.resizable,useCssTransforms:i.useCssTransforms,dragOptions:i.dragOptions,resizeOptions:i.resizeOptions,x:i.initialX,y:i.initialY,width:i.initialWidth,height:i.initialHeight})),S=()=>{if(!l.value)return;l.value.setAttribute("data-x",i.initialX.toString()),l.value.setAttribute("data-y",i.initialY.toString()),l.value.setAttribute("data-width",i.initialWidth.toString()),l.value.setAttribute("data-height",i.initialHeight.toString());const e=R(),t=D.makeElementDraggableResizable(l.value,x.value,e);o=t.cleanup,g=t.updatePositionAndSize,b=t.updatePosition,y=t.updateSize};f.push(a.watch([()=>i.draggable,()=>i.resizable,()=>i.dragOptions,()=>i.resizeOptions],()=>{o&&(o(),o=null),S()},{deep:i.watchDeep,immediate:i.watchImmediate})),f.push(a.watch([()=>i.initialX,()=>i.initialY,()=>i.initialWidth,()=>i.initialHeight],([e,t,p,c])=>{g&&(g(e,t,p,c),typeof e=="number"&&(r.value=e),typeof t=="number"&&(s.value=t),typeof p=="number"&&(n.value=p),typeof c=="number"&&(u.value=c))})),a.onMounted(()=>{S(),typeof i.initialX=="string"&&(r.value=h.parsePositionValue(i.initialX,l.value,"x")),typeof i.initialY=="string"&&(s.value=h.parsePositionValue(i.initialY,l.value,"y")),typeof i.initialWidth=="string"&&(n.value=h.parseCssSize(i.initialWidth,l.value,"width")),typeof i.initialHeight=="string"&&(u.value=h.parseCssSize(i.initialHeight,l.value,"height"))});const A=(e,t,p,c)=>{g&&(g(e,t,p,c),typeof e=="number"&&(r.value=e),typeof t=="number"&&(s.value=t),typeof p=="number"&&(n.value=p),typeof c=="number"&&(u.value=c))},B=(e,t)=>{b&&(b(e,t),typeof e=="number"&&(r.value=e),typeof t=="number"&&(s.value=t))},C=(e,t)=>{y&&(y(e,t),typeof e=="number"&&(n.value=e),typeof t=="number"&&(u.value=t))};return a.onUnmounted(()=>{o&&(o(),o=null),f!=null&&f.length&&(f.forEach(e=>e()),f.length=0),g=null,b=null,y=null}),P({elementRef:l,x:r,y:s,width:n,height:u,isDragging:v,isResizing:m,activeEdges:z,updatePositionAndSize:A,updatePosition:B,updateSize:C}),(e,t)=>(a.openBlock(),a.createElementBlock("div",{ref_key:"elementRef",ref:l,class:"draggable-resizable-wrapper"},[a.renderSlot(e.$slots,"default",a.normalizeProps(a.guardReactiveProps(O.value)))],512))}});module.exports=_;
//# sourceMappingURL=DraggableResizableWrapper.vue.cjs.map
