"use strict";const a=require("vue"),x=require("../utils/interact-helper.cjs"),_=a.defineComponent({__name:"DraggableResizableWrapper",props:{draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},useCssTransforms:{type:Boolean,default:!0},dragOptions:{default:()=>({})},resizeOptions:{default:()=>({})},initialX:{default:0},initialY:{default:0},initialWidth:{default:200},initialHeight:{default:150},watchDeep:{type:Boolean,default:!1},watchImmediate:{type:Boolean,default:!1}},emits:["dragStart","dragMove","dragEnd","resizeStart","resizeMove","resizeEnd"],setup(S,{expose:k,emit:E}){const t=S,p=E,l=a.ref(),r=a.ref(typeof t.initialX=="number"?t.initialX:0),n=a.ref(typeof t.initialY=="number"?t.initialY:0),c=a.ref(typeof t.initialWidth=="number"?t.initialWidth:200),d=a.ref(typeof t.initialHeight=="number"?t.initialHeight:150),v=a.ref(!1),m=a.ref(!1),y=a.ref({});let s=null,g=null,b=null,z=null;const u=[],O=a.computed(()=>({x:r.value,y:n.value,width:c.value,height:d.value,isDragging:v.value,isResizing:m.value,activeEdges:y.value})),P=()=>({onDrag:e=>{switch(r.value=e.left,n.value=e.top,v.value=e.type==="dragstart"?!0:e.type==="dragend"?!1:v.value,e.type){case"dragstart":p("dragStart",e);break;case"dragmove":p("dragMove",e);break;case"dragend":p("dragEnd",e);break}},onResize:e=>{switch(c.value=e.width,d.value=e.height,r.value=e.left,n.value=e.top,m.value=e.type==="resizestart"?!0:e.type==="resizeend"?!1:m.value,y.value=e.edges||{},e.type){case"resizestart":p("resizeStart",e);break;case"resizemove":p("resizeMove",e);break;case"resizeend":p("resizeEnd",e);break}}}),R=a.computed(()=>({draggable:t.draggable,resizable:t.resizable,useCssTransforms:t.useCssTransforms,dragOptions:t.dragOptions,resizeOptions:t.resizeOptions,x:t.initialX,y:t.initialY,width:t.initialWidth,height:t.initialHeight})),h=()=>{if(!l.value)return;l.value.setAttribute("data-x",t.initialX.toString()),l.value.setAttribute("data-y",t.initialY.toString()),l.value.setAttribute("data-width",t.initialWidth.toString()),l.value.setAttribute("data-height",t.initialHeight.toString());const e=P(),i=x.makeElementDraggableResizable(l.value,R.value,e);s=i.cleanup,g=i.updatePositionAndSize,b=i.updatePosition,z=i.updateSize};u.push(a.watch([()=>t.draggable,()=>t.resizable,()=>t.dragOptions,()=>t.resizeOptions],()=>{s&&(s(),s=null),h()},{deep:t.watchDeep,immediate:t.watchImmediate})),u.push(a.watch([()=>t.initialX,()=>t.initialY,()=>t.initialWidth,()=>t.initialHeight],([e,i,o,f])=>{g&&(g(e,i,o,f),typeof e=="number"&&(r.value=e),typeof i=="number"&&(n.value=i),typeof o=="number"&&(c.value=o),typeof f=="number"&&(d.value=f))})),a.onMounted(()=>{h()});const A=(e,i,o,f)=>{g&&(g(e,i,o,f),typeof e=="number"&&(r.value=e),typeof i=="number"&&(n.value=i),typeof o=="number"&&(c.value=o),typeof f=="number"&&(d.value=f))},B=(e,i)=>{b&&(b(e,i),typeof e=="number"&&(r.value=e),typeof i=="number"&&(n.value=i))},D=(e,i)=>{z&&(z(e,i),typeof e=="number"&&(c.value=e),typeof i=="number"&&(d.value=i))};return a.onUnmounted(()=>{s&&(s(),s=null),u!=null&&u.length&&(u.forEach(e=>e()),u.length=0),g=null,b=null,z=null}),k({elementRef:l,x:r,y:n,width:c,height:d,isDragging:v,isResizing:m,activeEdges:y,updatePositionAndSize:A,updatePosition:B,updateSize:D}),(e,i)=>(a.openBlock(),a.createElementBlock("div",{ref_key:"elementRef",ref:l,class:"draggable-resizable-wrapper"},[a.renderSlot(e.$slots,"default",a.normalizeProps(a.guardReactiveProps(O.value)))],512))}});module.exports=_;
//# sourceMappingURL=DraggableResizableWrapper.vue.cjs.map
